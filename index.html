<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Trade Analyzer</title>
<style>
    body { font-family: Arial; padding: 20px; }
    #result { margin-top: 20px; white-space: pre-wrap; }
</style>
</head>
<body>

<h2>Trade Analyzer</h2>
<input type="file" id="fileInput" accept=".csv">

<div id="result"></div>

<script>
document.getElementById("fileInput").addEventListener("change", function(e) {
    const file = e.target.files[0];
    if (!file) return;

    const reader = new FileReader();

    reader.onload = function(evt) {
        const text = evt.target.result;

        // تقسيم CSV بطريقة تقبل جميع الصيغ
        const rows = text.split(/\r?\n/).map(r => r.split(/,|;|\t/));

        let output = "تم تحميل ملف CSV بنجاح ✔️\n\n";
        output += "عدد الأسطر: " + rows.length + "\n";
        output += "عدد الأعمدة: " + rows[0].length + "\n\n";

        output += "العناوين:\n";
        output += rows[0].join(" | ") + "\n\n";

        output += "أول 5 أسطر:\n";
        for (let i = 1; i < Math.min(6, rows.length); i++) {
            output += rows[i].join(" | ") + "\n";
        }

        document.getElementById("result").innerText = output;
    };

    reader.readAsText(file);
});
</script>

</body>
</html>
